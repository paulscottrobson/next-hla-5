              	; --------------------------------------
              	; zasm: assemble "library.asm"
              	; date: 2018-12-30 10:19:43
              	; --------------------------------------


              	; *********************************************************************************
              	; *********************************************************************************
              	;
              	;		File:		library.asm
              	;		Purpose:	Wrapper for building libraries.
              	;		Date : 		28th December 2018
              	;		Author:		paul@robsons.org.uk
              	;
              	; *********************************************************************************
              	; *********************************************************************************
              	
              		include "common/kernel.asm"
              	; ***************************************************************************************
              	; ***************************************************************************************
              	;
              	;		Name : 		kernel.asm
              	;		Author :	Paul Robson (paul@robsons.org.uk)
              	;		Date : 		27th December 2018
              	;		Purpose :	Flat Forth Kernel
              	;
              	; ***************************************************************************************
              	; ***************************************************************************************
              	
0020:         	FirstCodePage = $20 								; $20 = code page.
5FFE:         	StackTop = $5FFE 									; Z80 call stack top.
              	
8000:         			org 	$8000 								; $8000 boot.
8000: 1808    			jr 		Boot
8002: FFFF    			org 	$8004 								; $8004 address of sysinfo
8004: 7087    			dw 		SystemInformation 
8006: FFFF    			org 	$8008 								; $8008 address of first definition.
8008: 2B83    			dw 	 	linkHeader
              	
800A: DD01    	Boot:	db 		$DD,$01
800C: 31FE5F  			ld 		sp,StackTop							; reset Z80 Stack
800F: F3      			di											; disable interrupts
8010: ED910702			db 		$ED,$91,7,2							; set turbo port (7) to 2 (14Mhz speed)
8014: 2E00    			ld 		l,0	 								; graphic mode 0
8016: CDB784  			call 	GFXMode
8019: 3A7E87  			ld 		a,(StartAddressPage)				; Switch to start page
801C: ED9256  			db 		$ED,$92,$56
801F: 3C      			inc 	a
8020: ED9257  			db 		$ED,$92,$57
8023: 3D      			dec 	a
8024: 08      			ex 		af,af'								; Set A' to current page.
8025: 2A7C87  			ld 		hl,(StartAddress) 					; start running address
8028: E9      			jp 		(hl) 								; and start
              	
8029:         	__KernelHalt: 										; if boot address not set.
8029: 18FE    			jr 		__KernelHalt
              	
802B:         	AlternateFont:										; nicer font
              			include "font.inc" 							; can be $3D00 here to save memory
802B: 00000000	  db 0,0,0,0,0,0,0,0,12,30,30,12,12,0,12,0,54,54,0,0,0,0,0,0,54,54,127,54,127,54,54,0,24,62,96,60,6,124,24,0,0,99,102,12,24,51,99,0,28,54,28,59,110,102,59,0,48,48,96,0,0,0,0,0,12,24,48,48,48,24,12,0,48,24,12,12,12,24,48,0,0,51,30,127,30,51,0,0,0,24,24,126,24,24,0,0,0,0,0,0,0,24,24,48,0,0,0,126,0,0,0,0,0,0,0,0,0,24,24,0,3,6,12,24,48,96,64,0,62,99,103,111,123,115,62,0,24,56,24,24,24,24,126,0,60,102,6,28,48,102,126,0,60,102,6,28,6,102,60,0,14,30,54,102,127,6,15,0,126,96,124,6,6,102,60,0,28,48,96,124,102,102,60,0,126,102,6,12,24,24,24,0,60,102,102,60,102,102,60,0,60,102,102,62,6,12,56,0,0,24,24,0,0,24,24,0,0,24,24,0,0,24,24,48,12,24,48,96,48,24,12,0,0,0,126,0,0,126,0,0,48,24,12,6,12,24,48,0,60,102,6,12,24,0,24,0,62,99,111,111,111,96,60,0,24,60,102,102,126,102,102,0,126,51,51,62,51,51,126,0,30,51,96,96,96,51,30,0,124,54,51,51,51,54,124,0,127,49,52,60,52,49,127,0,127,49,52,60,52,48,120,0,30,51,96,96,103,51,31,0,102,102,102,126,102,102,102,0,60,24,24,24,24,24,60,0,15,6,6,6,102,102,60,0,115,51,54,60,54,51,115,0,120,48,48,48,49,51,127,0,99,119,127,127,107,99,99,0,99,115,123,111,103,99,99,0,28,54,99,99,99,54,28,0,126,51,51,62,48,48,120,0,60,102,102,102,110,60,14,0,126,51,51,62,54,51,115,0,60,102,112,56,14,102,60,0,126,90,24,24,24,24,60,0,102,102,102,102,102,102,126,0,102,102,102,102,102,60,24,0,99,99,99,107,127,119,99,0,99,99,54,28,28,54,99,0,102,102,102,60,24,24,60,0,127,99,70,12,25,51,127,0,60,48,48,48,48,48,60,0,96,48,24,12,6,3,1,0,60,12,12,12,12,12,60,0,8,28,54,99,0,0,0,0,0,0,0,0,0,0,0,127,24,24,12,0,0,0,0,0,0,0,60,6,62,102,59,0,112,48,48,62,51,51,110,0,0,0,60,102,96,102,60,0,14,6,6,62,102,102,59,0,0,0,60,102,126,96,60,0,28,54,48,120,48,48,120,0,0,0,59,102,102,62,6,124,112,48,54,59,51,51,115,0,24,0,56,24,24,24,60,0,6,0,6,6,6,102,102,60,112,48,51,54,60,54,115,0,56,24,24,24,24,24,60,0,0,0,102,127,127,107,99,0,0,0,124,102,102,102,102,0,0,0,60,102,102,102,60,0,0,0,110,51,51,62,48,120,0,0,59,102,102,62,6,15,0,0,110,59,51,48,120,0,0,0,62,96,60,6,124,0,8,24,62,24,24,26,12,0,0,0,102,102,102,102,59,0,0,0,102,102,102,60,24,0,0,0,99,107,127,127,54,0,0,0,99,54,28,54,99,0,0,0,102,102,102,62,6,124,0,0,126,76,24,50,126,0,14,24,24,112,24,24,14,0,12,12,12,0,12,12,12,0,112,24,24,14,24,24,112,0,59,110,0,0,0,0,0,0,0,0,0,0,0,0,0,0
802F: 00000000	
8033: 0C1E1E0C	
8037: 0C000C00	
803B: 36360000	
803F: 00000000	
8043: 36367F36	
8047: 7F363600	
804B: 183E603C	
804F: 067C1800	
8053: 0063660C	
8057: 18336300	
805B: 1C361C3B	
805F: 6E663B00	
8063: 30306000	
8067: 00000000	
806B: 0C183030	
806F: 30180C00	
8073: 30180C0C	
8077: 0C183000	
807B: 00331E7F	
807F: 1E330000	
8083: 0018187E	
8087: 18180000	
808B: 00000000	
808F: 00181830	
8093: 0000007E	
8097: 00000000	
809B: 00000000	
809F: 00181800	
80A3: 03060C18	
80A7: 30604000	
80AB: 3E63676F	
80AF: 7B733E00	
80B3: 18381818	
80B7: 18187E00	
80BB: 3C66061C	
80BF: 30667E00	
80C3: 3C66061C	
80C7: 06663C00	
80CB: 0E1E3666	
80CF: 7F060F00	
80D3: 7E607C06	
80D7: 06663C00	
80DB: 1C30607C	
80DF: 66663C00	
80E3: 7E66060C	
80E7: 18181800	
80EB: 3C66663C	
80EF: 66663C00	
80F3: 3C66663E	
80F7: 060C3800	
80FB: 00181800	
80FF: 00181800	
8103: 00181800	
8107: 00181830	
810B: 0C183060	
810F: 30180C00	
8113: 00007E00	
8117: 007E0000	
811B: 30180C06	
811F: 0C183000	
8123: 3C66060C	
8127: 18001800	
812B: 3E636F6F	
812F: 6F603C00	
8133: 183C6666	
8137: 7E666600	
813B: 7E33333E	
813F: 33337E00	
8143: 1E336060	
8147: 60331E00	
814B: 7C363333	
814F: 33367C00	
8153: 7F31343C	
8157: 34317F00	
815B: 7F31343C	
815F: 34307800	
8163: 1E336060	
8167: 67331F00	
816B: 6666667E	
816F: 66666600	
8173: 3C181818	
8177: 18183C00	
817B: 0F060606	
817F: 66663C00	
8183: 7333363C	
8187: 36337300	
818B: 78303030	
818F: 31337F00	
8193: 63777F7F	
8197: 6B636300	
819B: 63737B6F	
819F: 67636300	
81A3: 1C366363	
81A7: 63361C00	
81AB: 7E33333E	
81AF: 30307800	
81B3: 3C666666	
81B7: 6E3C0E00	
81BB: 7E33333E	
81BF: 36337300	
81C3: 3C667038	
81C7: 0E663C00	
81CB: 7E5A1818	
81CF: 18183C00	
81D3: 66666666	
81D7: 66667E00	
81DB: 66666666	
81DF: 663C1800	
81E3: 6363636B	
81E7: 7F776300	
81EB: 6363361C	
81EF: 1C366300	
81F3: 6666663C	
81F7: 18183C00	
81FB: 7F63460C	
81FF: 19337F00	
8203: 3C303030	
8207: 30303C00	
820B: 6030180C	
820F: 06030100	
8213: 3C0C0C0C	
8217: 0C0C3C00	
821B: 081C3663	
821F: 00000000	
8223: 00000000	
8227: 0000007F	
822B: 18180C00	
822F: 00000000	
8233: 00003C06	
8237: 3E663B00	
823B: 7030303E	
823F: 33336E00	
8243: 00003C66	
8247: 60663C00	
824B: 0E06063E	
824F: 66663B00	
8253: 00003C66	
8257: 7E603C00	
825B: 1C363078	
825F: 30307800	
8263: 00003B66	
8267: 663E067C	
826B: 7030363B	
826F: 33337300	
8273: 18003818	
8277: 18183C00	
827B: 06000606	
827F: 0666663C	
8283: 70303336	
8287: 3C367300	
828B: 38181818	
828F: 18183C00	
8293: 0000667F	
8297: 7F6B6300	
829B: 00007C66	
829F: 66666600	
82A3: 00003C66	
82A7: 66663C00	
82AB: 00006E33	
82AF: 333E3078	
82B3: 00003B66	
82B7: 663E060F	
82BB: 00006E3B	
82BF: 33307800	
82C3: 00003E60	
82C7: 3C067C00	
82CB: 08183E18	
82CF: 181A0C00	
82D3: 00006666	
82D7: 66663B00	
82DB: 00006666	
82DF: 663C1800	
82E3: 0000636B	
82E7: 7F7F3600	
82EB: 00006336	
82EF: 1C366300	
82F3: 00006666	
82F7: 663E067C	
82FB: 00007E4C	
82FF: 18327E00	
8303: 0E181870	
8307: 18180E00	
830B: 0C0C0C00	
830F: 0C0C0C00	
8313: 7018180E	
8317: 18187000	
831B: 3B6E0000	
831F: 00000000	
8323: 00...   	
              	
              		include "temp/__source.asm"
              	; *********************************************************************************
              	; *********************************************************************************
              	;
              	;		File:		divide.asm
              	;		Purpose:	16 bit unsigned divide
              	;		Date : 		28th December 2018
              	;		Author:		paul@robsons.org.uk
              	;
              	; *********************************************************************************
              	; *********************************************************************************
              	
              	;	Actually calculates HL / BC
              	
832B:         	linkHeader:
832B:         	link0:
832B: 1900    	    dw link1-link0
832D: 7379732E	 	db "sys.divide",0
8331: 64697669	
8335: 646500  	
8338: C5      		push 	bc
8339: D5      		push 	de
833A: EB      		ex 		de,hl
833B: 69      		ld 		l,c
833C: 60      		ld 		h,b
833D: CD5D83  		call 	DIVDivideMod16
8340: EB      		ex 		de,hl
8341: D1      		pop 	de
8342: C1      		pop 	bc
8343: C9      		ret
              	
              	;	Actually calculates HL % BC
              	
8344:         	link1:
8344: 4400    	    dw link2-link1
8346: 7379732E	 	db "sys.modulus",0
834A: 6D6F6475	
834E: 6C757300	
8352: C5      		push 	bc
8353: D5      		push 	de
8354: EB      		ex 		de,hl
8355: 69      		ld 		l,c
8356: 60      		ld 		h,b
8357: CD5D83  		call 	DIVDivideMod16
835A: D1      		pop 	de
835B: C1      		pop 	bc
835C: C9      		ret
              	
              	; *********************************************************************************
              	;
              	;			Calculates DE / HL. On exit DE = result, HL = remainder
              	;
              	; *********************************************************************************
              	
835D:         	DIVDivideMod16:
              	
835D: C5      		push 	bc
835E: 42      		ld 		b,d 				; DE
835F: 4B      		ld 		c,e
8360: EB      		ex 		de,hl
8361: 210000  		ld 		hl,0
8364: 78      		ld 		a,b
8365: 0608    		ld 		b,8
8367:         	Div16_Loop1:
8367: 17      		rla
8368: ED6A    		adc 	hl,hl
836A: ED52    		sbc 	hl,de
836C: 3001    		jr 		nc,Div16_NoAdd1
836E: 19      		add 	hl,de
836F:         	Div16_NoAdd1:
836F: 10F6    		djnz 	Div16_Loop1
8371: 17      		rla
8372: 2F      		cpl
8373: 47      		ld 		b,a
8374: 79      		ld 		a,c
8375: 48      		ld 		c,b
8376: 0608    		ld 		b,8
8378:         	Div16_Loop2:
8378: 17      		rla
8379: ED6A    		adc 	hl,hl
837B: ED52    		sbc 	hl,de
837D: 3001    		jr 		nc,Div16_NoAdd2
837F: 19      		add 	hl,de
8380:         	Div16_NoAdd2:
8380: 10F6    		djnz 	Div16_Loop2
8382: 17      		rla
8383: 2F      		cpl
8384: 51      		ld 		d,c
8385: 5F      		ld 		e,a
8386: C1      		pop 	bc
8387: C9      		ret
              	
              	
              	; *********************************************************************************
              	; *********************************************************************************
              	;
              	;		File:		multiply.asm
              	;		Purpose:	16 bit unsigned multiply
              	;		Date : 		28th December 2018
              	;		Author:		paul@robsons.org.uk
              	;
              	; *********************************************************************************
              	; *********************************************************************************
              	
              	; 	calculate HL = HL * BC
              	
8388:         	link2:
8388: 3100    	    dw link3-link2
838A: 7379732E	 	db "sys.multiply",0
838E: 6D756C74	
8392: 69706C79	
8396: 00      	
8397: D5      			push 	de
8398: 50      			ld 		d,b
8399: 59      			ld 		e,c
839A: CD9F83  			call 	MULTMultiply16
839D: D1      			pop 	de
839E: C9      			ret
              	
              	; *********************************************************************************
              	;
              	;								Does HL = HL * DE
              	;
              	; *********************************************************************************
              	
839F:         	MULTMultiply16:
839F: C5      			push 	bc
83A0: D5      			push 	de
83A1: 44      			ld 		b,h 							; get multipliers in DE/BC
83A2: 4D      			ld 		c,l
83A3: 210000  			ld 		hl,0 							; zero total
83A6:         	__Core__Mult_Loop:
83A6: CB41    			bit 	0,c 							; lsb of shifter is non-zero
83A8: 2801    			jr 		z,__Core__Mult_Shift
83AA: 19      			add 	hl,de 							; add adder to total
83AB:         	__Core__Mult_Shift:
83AB: CB38    			srl 	b 								; shift BC right.
83AD: CB19    			rr 		c
83AF: EB      			ex 		de,hl 							; shift DE left
83B0: 29      			add 	hl,hl
83B1: EB      			ex 		de,hl
83B2: 78      			ld 		a,b 							; loop back if BC is nonzero
83B3: B1      			or 		c
83B4: 20F0    			jr 		nz,__Core__Mult_Loop
83B6: D1      			pop 	de
83B7: C1      			pop 	bc
83B8: C9      			ret
              	; *********************************************************************************
              	; *********************************************************************************
              	;
              	;		File:		bitwise.asm
              	;		Purpose:	16 bit bitwise operations
              	;		Date : 		28th December 2018
              	;		Author:		paul@robsons.org.uk
              	;
              	; *********************************************************************************
              	; *********************************************************************************
              	
83B9:         	link3:
83B9: 1100    	    dw link4-link3
83BB: 7379732E	 	db "sys.and",0
83BF: 616E6400	
83C3: 7C      			ld 		a,h
83C4: A0      			and 	b
83C5: 67      			ld 		h,a
83C6: 7D      			ld 		a,l
83C7: A1      			and 	c
83C8: 6F      			ld 		l,a
83C9: C9      			ret
              	
83CA:         	link4:
83CA: 1100    	    dw link5-link4
83CC: 7379732E	 	db "sys.xor",0
83D0: 786F7200	
83D4: 7C      			ld 		a,h
83D5: A8      			xor 	b
83D6: 67      			ld 		h,a
83D7: 7D      			ld 		a,l
83D8: A9      			xor 	c
83D9: 6F      			ld 		l,a
83DA: C9      			ret
              	
83DB:         	link5:
83DB: 8800    	    dw link6-link5
83DD: 7379732E	 	db "sys.or",0
83E1: 6F7200  	
83E4: 7C      			ld 		a,h
83E5: B0      			or 		b
83E6: 67      			ld 		h,a
83E7: 7D      			ld 		a,l
83E8: B1      			or 		c
83E9: 6F      			ld 		l,a
83EA: C9      			ret
              	
              	; *********************************************************************************
              	; *********************************************************************************
              	;
              	;		File:		screen48k.asm
              	;		Purpose:	Hardware interface to Spectrum display, standard but with
              	;					sprites enabled.
              	;		Date : 		28th December 2018
              	;		Author:		paul@robsons.org.uk
              	;
              	; *********************************************************************************
              	; *********************************************************************************
              	
              	; *********************************************************************************
              	;
              	;						Call the SetMode for the Spectrum 48k
              	;
              	; *********************************************************************************
              	
83EB:         	GFXInitialise48k:
83EB: F5      			push 	af 									; save registers
83EC: C5      			push 	bc
              	
83ED: 013B12  			ld 		bc,$123B 							; Layer 2 access port
83F0: 3E00    			ld 		a,0 								; disable Layer 2
83F2: ED79    			out 	(c),a
83F4: ED911503			db 		$ED,$91,$15,$3						; Disable LowRes but enable Sprites
              	
83F8: 210040  			ld 		hl,$4000 							; clear pixel memory
83FB: 3600    	__cs1:	ld 		(hl),0
83FD: 23      			inc 	hl
83FE: 7C      			ld 		a,h
83FF: FE58    			cp 		$58
8401: 20F8    			jr 		nz,__cs1
8403: 3647    	__cs2:	ld 		(hl),$47							; clear attribute memory
8405: 23      			inc 	hl
8406: 7C      			ld 		a,h
8407: FE5B    			cp 		$5B
8409: 20F8    			jr 		nz,__cs2
840B: AF      			xor 	a 									; border off
840C: D3FE    			out 	($FE),a
840E: C1      			pop 	bc
840F: F1      			pop 	af
8410: 212018  			ld 		hl,$1820 							; H = 24,L = 32, screen extent
8413: 111784  			ld 		de,GFXPrintCharacter48k
8416: C9      			ret
              	
              	; *********************************************************************************
              	;
              	;				Write a character E on the screen at HL, in colour D
              	;
              	; *********************************************************************************
              	
8417:         	GFXPrintCharacter48k:
8417: F5      			push 	af 									; save registers
8418: C5      			push 	bc
8419: D5      			push 	de
841A: E5      			push 	hl
              	
841B: 43      			ld 		b,e 								; character in B
841C: 7C      			ld 		a,h 								; check range.
841D: FE03    			cp 		3
841F: 303D    			jr 		nc,__ZXWCExit
              	;
              	;		work out attribute position
              	;
8421: E5      			push 	hl 									; save position.
8422: 7C      			ld 		a,h
8423: C658    			add 	$58
8425: 67      			ld 		h,a
              	
8426: 7A      			ld 		a,d 								; get current colour
8427: E607    			and 	7  									; mask 0..2
8429: F640    			or 		$40  								; make bright
842B: 77      			ld 		(hl),a 								; store it.
842C: E1      			pop 	hl
              	;
              	;		calculate screen position => HL
              	;
842D: D5      			push 	de
842E: EB      			ex 		de,hl
842F: 6B      			ld 		l,e 								; Y5 Y4 Y3 X4 X3 X2 X1 X0
8430: 7A      			ld 		a,d
8431: E603    			and 	3
8433: 87      			add 	a,a
8434: 87      			add 	a,a
8435: 87      			add 	a,a
8436: F640    			or 		$40
8438: 67      			ld 		h,a
8439: D1      			pop 	de
              	;
              	;		char# 32-127 to font address => DE
              	;
843A: E5      			push 	hl
843B: 78      			ld 		a,b 								; get character
843C: E67F    			and 	$7F 								; bits 0-6 only.
843E: D620    			sub 	32
8440: 6F      			ld 		l,a 								; put in HL
8441: 2600    			ld 		h,0
8443: 29      			add 	hl,hl 								; x 8
8444: 29      			add 	hl,hl
8445: 29      			add 	hl,hl
8446: ED5B8C87			ld 		de,(SIFontBase) 					; add the font base.
844A: 19      			add 	hl,de
844B: EB      			ex 		de,hl 								; put in DE (font address)
844C: E1      			pop 	hl
              	;
              	;		copy font data to screen position.
              	;
844D: 78      			ld 		a,b
844E: 0608    			ld 		b,8 								; copy 8 characters
8450: 0E00    			ld 		c,0 								; XOR value 0
8452: CB7F    			bit 	7,a 								; is the character reversed
8454: 2801    			jr 		z,__ZXWCCopy
8456: 0D      			dec 	c 									; C is the XOR mask now $FF
8457:         	__ZXWCCopy:
8457: 1A      			ld 		a,(de)								; get font data
8458: A9      			xor 	c 									; xor with reverse
8459: 77      			ld 		(hl),a 								; write back
845A: 24      			inc 	h 									; bump pointers
845B: 13      			inc 	de
845C: 10F9    			djnz 	__ZXWCCopy 							; do B times.
845E:         	__ZXWCExit:
845E: E1      			pop 	hl 									; restore and exit
845F: D1      			pop 	de
8460: C1      			pop 	bc
8461: F1      			pop 	af
8462: C9      			ret
              	; *********************************************************************************
              	; *********************************************************************************
              	;
              	;		File:		graphics.asm
              	;		Purpose:	General screen I/O routines
              	;		Date : 		28th December 2018
              	;		Author:		paul@robsons.org.uk
              	;
              	; *********************************************************************************
              	; *********************************************************************************
              	
8463:         	link6:
8463: 1500    	    dw link7-link6
8465: 636F6E73	 	db "console.setmode",1
8469: 6F6C652E	
846D: 7365746D	
8471: 6F646501	
8475: C3B784  			jp 		GFXMode
              	
8478:         	link7:
8478: 1300    	    dw link8-link7
847A: 636F6E73	 	db "console.write",2
847E: 6F6C652E	
8482: 77726974	
8486: 6502    	
8488: C3E884  			jp 		GFXWriteCharacter
              	
848B:         	link8:
848B: 1600    	    dw link9-link8
848D: 636F6E73	 	db "console.writehex",2
8491: 6F6C652E	
8495: 77726974	
8499: 65686578	
849D: 02      	
849E: C3FB84  			jp 		GFXWriteHexWord
              	
84A1:         	link9:
84A1: E801    	    dw link10-link9
84A3: 636F6E73	 	db "console.info",1
84A7: 6F6C652E	
84AB: 696E666F	
84AF: 01      	
84B0: 118087  			ld 		de,DisplayInformation
84B3: 73      			ld 		(hl),e
84B4: 23      			inc 	hl
84B5: 72      			ld 		(hl),d
84B6: C9      			ret
              	
              	; *********************************************************************************
              	;
              	;								Set Graphics Mode to L
              	;
              	; *********************************************************************************
              	
84B7:         	GFXMode:
84B7: C5      			push 	bc
84B8: D5      			push 	de
84B9: E5      			push 	hl
84BA: 2D      			dec 	l 									; L = 1 mode layer2
84BB: 2808    			jr 		z,__GFXLayer2
84BD: 2D      			dec 	l
84BE: 280A    			jr 		z,__GFXLowRes 						; L = 2 mode lowres
              	
84C0: CDEB83  			call 	GFXInitialise48k					; L = 0 or anything else, 48k mode.
84C3: 1808    			jr 		__GFXConfigure
              	
84C5:         	__GFXLayer2:
84C5: CD2D85  			call 	GFXInitialiseLayer2
84C8: 1803    			jr 		__GFXConfigure
              	
84CA:         	__GFXLowRes:
84CA: CDE485  			call 	GFXInitialiseLowRes
              	
84CD:         	__GFXConfigure:
84CD: 7D      			ld 		a,l 								; save screen size
84CE: 328087  			ld 		(SIScreenWidth),a
84D1: 7C      			ld 		a,h
84D2: 328487  			ld 		(SIScreenHeight),a
84D5: EB      			ex 		de,hl 								; save driver
84D6: 229087  			ld 		(SIScreenDriver),hl
              	
84D9: 6A      			ld 		l,d 								; put sizes in HL DE
84DA: 2600    			ld 		h,0
84DC: 1600    			ld 		d,0
84DE: CD9F83  			call 	MULTMultiply16 						; multiply to get size and store.
84E1: 228887  			ld 		(SIScreenSize),hl
              	
84E4: E1      			pop 	hl
84E5: D1      			pop 	de
84E6: C1      			pop 	bc
84E7: C9      			ret
              	
              	; *********************************************************************************
              	;
              	;		Write character D (colour) E (character) to position HL.
              	;
              	; *********************************************************************************
              	
84E8:         	GFXWriteCharacter:
84E8: F5      			push 	af
84E9: C5      			push 	bc
84EA: D5      			push 	de
84EB: E5      			push 	hl
84EC: 01F684  			ld 		bc,__GFXWCExit
84EF: C5      			push 	bc
84F0: ED4B9087			ld 		bc,(SIScreenDriver)
84F4: C5      			push 	bc
84F5: C9      			ret
84F6:         	__GFXWCExit:
84F6: E1      			pop 	hl
84F7: D1      			pop 	de
84F8: C1      			pop 	bc
84F9: F1      			pop 	af
84FA: C9      			ret
              	
              	; *********************************************************************************
              	;
              	;						Write hex word DE at position HL
              	;
              	; *********************************************************************************
              	
84FB:         	GFXWriteHexWord:
84FB: 3E05    			ld 		a,5
84FD:         	GFXWriteHexWordA:
84FD: C5      			push 	bc
84FE: D5      			push 	de
84FF: E5      			push 	hl
8500: 4F      			ld 		c,a
8501: 7A      			ld 		a,d
8502: D5      			push 	de
8503: CD0F85  			call 	__GFXWHByte
8506: D1      			pop 	de
8507: 7B      			ld 		a,e
8508: CD0F85  			call	__GFXWHByte
850B: E1      			pop 	hl
850C: D1      			pop 	de
850D: C1      			pop 	bc
850E: C9      			ret
              	
850F:         	__GFXWHByte:
850F: F5      			push 	af
8510: CB0F    			rrc 	a
8512: CB0F    			rrc		a
8514: CB0F    			rrc 	a
8516: CB0F    			rrc 	a
8518: CD1C85  			call 	__GFXWHNibble
851B: F1      			pop 	af
851C:         	__GFXWHNibble:
851C: 51      			ld 		d,c
851D: E60F    			and 	15
851F: FE0A    			cp 		10
8521: 3802    			jr 		c,__GFXWHDigit
8523: C607    			add		a,7
8525:         	__GFXWHDigit:
8525: C630    			add 	a,48
8527: 5F      			ld 		e,a
8528: CDE884  			call 	GFXWriteCharacter
852B: 23      			inc 	hl
852C: C9      			ret
              	; *********************************************************************************
              	; *********************************************************************************
              	;
              	;		File:		screen_layer2.asm
              	;		Purpose:	Layer 2 console interface, sprites enabled, no shadow.
              	;		Date : 		28th December 2018
              	;		Author:		paul@robsons.org.uk
              	;
              	; *********************************************************************************
              	; *********************************************************************************
              	
              	; *********************************************************************************
              	;
              	;								Clear Layer 2 Display.
              	;
              	; *********************************************************************************
              	
              	
852D:         	GFXInitialiseLayer2:
852D: F5      			push 	af
852E: C5      			push 	bc
852F: D5      			push 	de
8530: ED911503			db 		$ED,$91,$15,$3						; Disable LowRes but enable Sprites
              	
8534: 1E02    			ld 		e,2 								; 3 banks to erase
8536:         	L2PClear:
8536: 7B      			ld 		a,e 								; put bank number in bits 6/7
8537: CB0F    			rrc 	a
8539: CB0F    			rrc 	a
853B: F603    			or 		2+1 								; shadow on, visible, enable write paging
853D: 013B12  			ld 		bc,$123B 							; out to layer 2 port
8540: ED79    			out 	(c),a
8542: 210040  			ld 		hl,$4000 							; erase the bank to $00
8545:         	L2PClearBank: 										; assume default palette :)
8545: 2B      			dec 	hl
8546: 3600    			ld 		(hl),$00
8548: 7C      			ld 		a,h
8549: B5      			or 		l
854A: 20F9    			jr		nz,L2PClearBank
854C: 1D      			dec 	e
854D: F23685  			jp 		p,L2PClear
              	
8550: AF      			xor 	a
8551: D3FE    			out 	($FE),a
              	
8553: D1      			pop 	de
8554: C1      			pop 	bc
8555: F1      			pop 	af
8556: 212018  			ld 		hl,$1820 							; still 32 x 24
8559: 115D85  			ld 		de,GFXPrintCharacterLayer2
855C: C9      			ret
              	;
              	;		Print Character E, colour D, position HL
              	;
855D:         	GFXPrintCharacterLayer2:
855D: F5      			push 	af
855E: C5      			push 	bc
855F: D5      			push 	de
8560: E5      			push 	hl
8561: DDE5    			push 	ix
              	
8563: 43      			ld 		b,e 								; save A temporarily
8564: 78      			ld 		a,b
8565: E67F    			and 	$7F
8567: FE20    			cp 		32
8569: 3872    			jr 		c,__L2Exit 							; check char in range
856B: 7C      			ld 		a,h
856C: FE03    			cp 		3
856E: 306D    			jr 		nc,__L2Exit 						; check position in range
8570: 78      			ld 		a,b
              	
8571: F5      			push 	af
8572: AF      			xor 	a 									; convert colour in C to palette index
8573: CB42    			bit 	0,d 								; (assumes standard palette)
8575: 2802    			jr 		z,__L2Not1
8577: F603    			or 		$03
8579:         	__L2Not1:
8579: CB52    			bit 	2,d
857B: 2802    			jr 		z,__L2Not2
857D: F61C    			or 		$1C
857F:         	__L2Not2:
857F: CB4A    			bit 	1,d
8581: 2802    			jr 		z,__L2Not3
8583: F6C0    			or 		$C0
8585:         	__L2Not3:
8585: 4F      			ld 		c,a 								; C is foreground
8586: 0600    			ld 		b,0									; B is xor flipper, initially zero
8588: F1      			pop 	af 									; restore char
              	
8589: E5      			push 	hl
858A: CB7F    			bit 	7,a 								; adjust background bit on bit 7
858C: 2802    			jr 		z,__L2NotCursor
858E: 06FF    			ld 		b,$FF 								; light grey is cursor
8590:         	__L2NotCursor:
8590: E67F    			and 	$7F 								; offset from space
8592: D620    			sub 	$20
8594: 6F      			ld 		l,a 								; put into HL
8595: 2600    			ld 		h,0
8597: 29      			add 	hl,hl 								; x 8
8598: 29      			add 	hl,hl
8599: 29      			add 	hl,hl
              	
859A: E5      			push 	hl 									; transfer to IX
859B: DDE1    			pop 	ix
859D: E1      			pop 	hl
              	
859E: C5      			push 	bc 									; add the font base to it.
859F: ED4B8C87			ld 		bc,(SIFontBase)
85A3: DD09    			add 	ix,bc
85A5: C1      			pop 	bc
              			;
              			;		figure out the correct bank.
              			;
85A6: C5      			push 	bc
85A7: 7C      			ld  	a,h 								; this is the page number.
85A8: CB0F    			rrc 	a
85AA: CB0F    			rrc 	a
85AC: E6C0    			and 	$C0 								; in bits 6 & 7
85AE: F603    			or 		$03 								; shadow on, visible, enable write pagin.
85B0: 013B12  			ld 		bc,$123B 							; out to layer 2 port
85B3: ED79    			out 	(c),a
85B5: C1      			pop 	bc
              			;
              			; 		now figure out position in bank
              			;
85B6: EB      			ex 		de,hl
85B7: 6B      			ld 		l,e
85B8: 2600    			ld 		h,0
85BA: 29      			add 	hl,hl
85BB: 29      			add 	hl,hl
85BC: 29      			add 	hl,hl
85BD: CB24    			sla 	h
85BF: CB24    			sla 	h
85C1: CB24    			sla 	h
              	
85C3: 1E08    			ld 		e,8 								; do 8 rows
85C5:         	__L2Outer:
85C5: E5      			push 	hl 									; save start
85C6: 1608    			ld 		d,8 								; do 8 columns
85C8: DD7E00  			ld 		a,(ix+0) 							; get the bit pattern
85CB: A8      			xor 	b 									; maybe flip it ?
85CC: DD23    			inc 	ix
85CE:         	__L2Loop:
85CE: 3600    			ld 		(hl),0 								; background
85D0: 87      			add 	a,a 								; shift pattern left
85D1: 3001    			jr 		nc,__L2NotSet
85D3: 71      			ld 		(hl),c 								; if MSB was set, overwrite with fgr
85D4:         	__L2NotSet:
85D4: 23      			inc 	hl
85D5: 15      			dec 	d 									; do a row
85D6: 20F6    			jr 		nz,	__L2Loop
85D8: E1      			pop 	hl 									; restore, go 256 bytes down.
85D9: 24      			inc 	h
85DA: 1D      			dec 	e 									; do 8 rows
85DB: 20E8    			jr 		nz,__L2Outer
85DD:         	__L2Exit:
85DD: DDE1    			pop 	ix
85DF: E1      			pop 	hl
85E0: D1      			pop 	de
85E1: C1      			pop 	bc
85E2: F1      			pop 	af
85E3: C9      			ret
              	; *********************************************************************************
              	; *********************************************************************************
              	;
              	;		File:		screen_lores.asm
              	;		Purpose:	LowRes console interface, sprites enabled.
              	;		Date : 		28th December 2018
              	;		Author:		paul@robsons.org.uk
              	;
              	; *********************************************************************************
              	; *********************************************************************************
              	
              	; *********************************************************************************
              	;
              	;								Clear LowRes Display.
              	;
              	; *********************************************************************************
              	
85E4:         	GFXInitialiseLowRes:
85E4: F5      			push 	af
85E5: C5      			push 	bc
85E6: D5      			push 	de
              	
85E7: ED911583			db 		$ED,$91,$15,$83						; Enable LowRes and enable Sprites
85EB: AF      			xor 	a 									; layer 2 off.
85EC: 013B12  			ld 		bc,$123B 							; out to layer 2 port
85EF: ED79    			out 	(c),a
              	
85F1: 210040  			ld 		hl,$4000 							; erase the bank to $00
85F4: 110060  			ld 		de,$6000
85F7:         	LowClearScreen: 									; assume default palette :)
85F7: AF      			xor 	a
85F8: 77      			ld 		(hl),a
85F9: 12      			ld 		(de),a
85FA: 23      			inc 	hl
85FB: 13      			inc 	de
85FC: 7C      			ld 		a,h
85FD: FE58    			cp 		$58
85FF: 20F6    			jr		nz,LowClearScreen
8601: AF      			xor 	a
8602: D3FE    			out 	($FE),a
8604: D1      			pop 	de
8605: C1      			pop 	bc
8606: F1      			pop 	af
8607: 21100C  			ld 		hl,$0C10 							; resolution is 16x12 chars
860A: 110E86  			ld 		de,GFXPrintCharacterLowRes
860D: C9      			ret
              	;
              	;		Print Character E Colour D @ HL
              	;
860E:         	GFXPrintCharacterLowRes:
860E: F5      			push 	af
860F: C5      			push 	bc
8610: D5      			push 	de
8611: E5      			push 	hl
8612: DDE5    			push 	ix
              	
8614: 43      			ld 		b,e 								; save character in B
8615: 7B      			ld 		a,e
8616: E67F    			and 	$7F
8618: FE20    			cp 		32
861A: 3866    			jr 		c,__LPExit
              	
861C: 29      			add 	hl,hl
861D: 29      			add 	hl,hl
861E: 7C      			ld	 	a,h 								; check in range 192*4 = 768
861F: FE03    			cp 		3
8621: 305F    			jr 		nc,__LPExit
              	
8623: 7A      			ld 		a,d 								; only lower 3 bits of colour
8624: E607    			and 	7
8626: 4F      			ld 		c,a 								; C is foreground
              	
8627: E5      			push 	hl
8628: 78      			ld 		a,b 								; get char back
8629: 0600    			ld 		b,0 								; B = no flip colour.
862B: CB7F    			bit 	7,a
862D: 2801    			jr 		z,__LowNotReverse 					; but 7 set, flip is $FF
862F: 05      			dec 	b
8630:         	__LowNotReverse:
8630: E67F    			and 	$7F 								; offset from space
8632: D620    			sub 	$20
8634: 6F      			ld 		l,a 								; put into HL
8635: 2600    			ld 		h,0
8637: 29      			add 	hl,hl 								; x 8
8638: 29      			add 	hl,hl
8639: 29      			add 	hl,hl
              	
863A: E5      			push 	hl 									; transfer to IX
863B: DDE1    			pop 	ix
              	
863D: C5      			push 	bc 									; add the font base to it.
863E: ED4B8C87			ld 		bc,(SIFontBase)
8642: DD09    			add 	ix,bc
8644: C1      			pop 	bc
8645: E1      			pop 	hl
8646: EB      			ex 		de,hl
8647: 7B      			ld 		a,e 								; put DE => HL
8648: E6C0    			and 	192 								; these are part of Y
864A: 6F      			ld 		l,a  								; Y multiplied by 4 then 32 = 128
864B: 62      			ld 		h,d
864C: 29      			add 	hl,hl
864D: 29      			add 	hl,hl
864E: 29      			add 	hl,hl
864F: 29      			add 	hl,hl
8650: CBF4    			set 	6,h 								; put into $4000 range
              	
8652: 3E3C    			ld 		a,15*4 								; mask for X, which has been premultiplied.
8654: A3      			and 	e 									; and with E, gives X position
8655: 87      			add 	a,a 								; now multiplied by 8.
8656: 5F      			ld 		e,a 								; DE is x offset.
8657: 1600    			ld 		d,0
              	
8659: 19      			add 	hl,de
865A: 7C      			ld 		a,h
865B: FE58    			cp 		$58 								; need to be shifted to 2nd chunk ?
865D: 3804    			jr 		c,__LowNotLower2
865F: 110008  			ld 		de,$0800
8662: 19      			add 	hl,de
8663:         	__LowNotLower2:
8663: 1E08    			ld 		e,8 								; do 8 rows
8665:         	__LowOuter:
8665: E5      			push 	hl 									; save start
8666: 1608    			ld 		d,8 								; do 8 columns
8668: DD7E00  			ld 		a,(ix+0) 							; get the bit pattern
866B: A8      			xor 	b
866C: DD23    			inc 	ix
866E:         	__LowLoop:
866E: 3600    			ld 		(hl),0 								; background
8670: 87      			add 	a,a 								; shift pattern left
8671: 3001    			jr 		nc,__LowNotSet
8673: 71      			ld 		(hl),c 								; if MSB was set, overwrite with fgr
8674:         	__LowNotSet:
8674: 2C      			inc 	l
8675: 15      			dec 	d 									; do a row
8676: 20F6    			jr 		nz,	__LowLoop
8678: E1      			pop 	hl 									; restore, go 256 bytes down.
8679: D5      			push 	de
867A: 118000  			ld 		de,128
867D: 19      			add 	hl,de
867E: D1      			pop 	de
867F: 1D      			dec 	e 									; do 8 rows
8680: 20E3    			jr 		nz,__LowOuter
8682:         	__LPExit:
8682: DDE1    			pop 	ix
8684: E1      			pop 	hl
8685: D1      			pop 	de
8686: C1      			pop 	bc
8687: F1      			pop 	af
8688: C9      			ret
              	
              	; *********************************************************************************
              	; *********************************************************************************
              	;
              	;		File:		keyboard.asm
              	;		Purpose:	Spectrum Keyboard Interface
              	;		Date : 		27th December 2018
              	;		Author:		paul@robsons.org.uk
              	;
              	; *********************************************************************************
              	; *********************************************************************************
              	
8689:         	link10:
8689: E500    	    dw link11-link10
868B: 636F6E73	 	db "console.inkey",1
868F: 6F6C652E	
8693: 696E6B65	
8697: 7901    	
8699: CDA186  			call 	IOScanKeyboard 						; read keyboard
869C: 77      			ld 		(hl),a 								; copy into variable
869D: 23      			inc 	hl
869E: 3600    			ld 		(hl),$00	 						; zero upper byte.
86A0: C9      			ret
              	
              	; *********************************************************************************
              	;
              	;			Scan the keyboard, return currently pressed key code in A
              	;
              	; *********************************************************************************
              	
86A1:         	IOScanKeyboard:
86A1: C5      			push 	bc
86A2: D5      			push 	de
86A3: E5      			push 	hl
              	
86A4: 21F686  			ld 		hl,__kr_no_shift_table 				; firstly identify shift state.
              	
86A7: 0EFE    			ld 		c,$FE 								; check CAPS SHIFT (emulator : left shift)
86A9: 06FE    			ld 		b,$FE
86AB: ED78    			in 		a,(c)
86AD: CB47    			bit 	0,a
86AF: 2005    			jr 		nz,__kr1
86B1: 211E87  			ld 		hl,__kr_shift_table
86B4: 180B    			jr 		__kr2
86B6:         	__kr1:
86B6: 067F    			ld 		b,$7F 								; check SYMBOL SHIFT (emulator : right shift)
86B8: ED78    			in 		a,(c)
86BA: CB4F    			bit 	1,a
86BC: 2003    			jr 		nz,__kr2
86BE: 211E87  			ld 		hl,__kr_symbol_shift_table
86C1:         	__kr2:
              	
86C1: 1EFE    			ld 		e,$FE 								; scan pattern.
86C3: 7B      	__kr3:	ld 		a,e 								; work out the mask, so we don't detect shift keys
86C4: 161E    			ld 		d,$1E 								; $FE row, don't check the least significant bit.
86C6: FEFE    			cp 		$FE
86C8: 2808    			jr 		z,___kr4
86CA: 161D    			ld 		d,$01D 								; $7F row, don't check the 2nd least significant bit
86CC: FE7F    			cp 		$7F
86CE: 2802    			jr 		z,___kr4
86D0: 161F    			ld 		d,$01F 								; check all bits.
86D2:         	___kr4:
86D2: 43      			ld 		b,e 								; scan the keyboard
86D3: 0EFE    			ld 		c,$FE
86D5: ED78    			in 		a,(c)
86D7: 2F      			cpl 										; make that active high.
86D8: A2      			and 	d  									; and with check value.
86D9: 2011    			jr 		nz,__kr_keypressed 					; exit loop if key pressed.
              	
86DB: 23      			inc 	hl 									; next set of keyboard characters
86DC: 23      			inc 	hl
86DD: 23      			inc 	hl
86DE: 23      			inc 	hl
86DF: 23      			inc 	hl
              	
86E0: 7B      			ld 		a,e 								; get pattern
86E1: 87      			add 	a,a 								; shift left
86E2: F601    			or 		1 									; set bit 1.
86E4: 5F      			ld 		e,a
              	
86E5: FEFF    			cp 		$FF 								; finished when all 1's.
86E7: 20DA    			jr 		nz,__kr3
86E9: AF      			xor 	a
86EA: 1806    			jr 		__kr_exit 							; no key found, return with zero.
              	;
86EC:         	__kr_keypressed:
86EC: 23      			inc 	hl  								; shift right until carry set
86ED: 1F      			rra
86EE: 30FC    			jr 		nc,__kr_keypressed
86F0: 2B      			dec 	hl 									; undo the last inc hl
86F1: 7E      			ld 		a,(hl) 								; get the character number.
86F2:         	__kr_exit:
86F2: E1      			pop 	hl
86F3: D1      			pop 	de
86F4: C1      			pop 	bc
86F5: C9      			ret
              	
              	; *********************************************************************************
              	;	 						Keyboard Mapping Tables
              	; *********************************************************************************
              	;
              	;	$FEFE-$7FFE scan, bit 0-4, active low
              	;
              	;	3:Abort (Shift+Q) 8:Backspace 13:Return
              	;	27:Break 32-127: Std ASCII all L/C
              	;
86F6:         	__kr_no_shift_table:
86F6: 007A7863			db 		0,  'z','x','c','v',			'a','s','d','f','g'
86FA: 76617364	
86FE: 6667    	
8700: 71776572			db 		'q','w','e','r','t',			'1','2','3','4','5'
8704: 74313233	
8708: 3435    	
870A: 30393837			db 		'0','9','8','7','6',			'p','o','i','u','y'
870E: 36706F69	
8712: 7579    	
8714: 0D6C6B6A			db 		13, 'l','k','j','h',			' ', 0, 'm','n','b'
8718: 6820006D	
871C: 6E62    	
              	
871E:         	__kr_shift_table:
871E:         	__kr_symbol_shift_table:
871E: 003A003F			db 		 0, ':', 0,  '?','/',			'~','|','\','{','}'
8722: 2F7E7C5C	
8726: 7B7D    	
8728: 0300003C			db 		 3,  0,  0  ,'<','>',			'!','@','#','$','%'
872C: 3E214023	
8730: 2425    	
8732: 5F292827			db 		'_',')','(',"'",'&',			'"',';', 0, ']','['
8736: 26223B00	
873A: 5D5B    	
873C: 1B3D2B2D			db 		27, '=','+','-','^',			' ', 0, '.',',','*'
8740: 5E20002E	
8744: 2C2A    	
              	
8746: 003A003F			db 		0,  ':',0  ,'?','/',			'~','|','\','{','}'
874A: 2F7E7C5C	
874E: 7B7D    	
8750: 0300003C			db 		3,  0,  0  ,'<','>',			16,17,18,19,20
8754: 3E101112	
8758: 1314    	
875A: 08291716			db 		8, ')',23,  22, 21,				'"',';', 0, ']','['
875E: 15223B00	
8762: 5D5B    	
8764: 1B3D2B2D			db 		27, '=','+','-','^',			' ', 0, '.',',','*'
8768: 5E20002E	
876C: 2C2A    	
876E:         	link11:
876E: 0000    	    dw 0
              		include "common/data.asm"
              	; ***************************************************************************************
              	; ***************************************************************************************
              	;
              	;		Name : 		data.asm
              	;		Author :	Paul Robson (paul@robsons.org.uk)
              	;		Date : 		27th December 2018
              	;		Purpose :	Data area
              	;
              	; ***************************************************************************************
              	; ***************************************************************************************
              	
              	; ***************************************************************************************
              	;
              	;								System Information
              	;
              	; ***************************************************************************************
              	
8770:         	SystemInformation:
              	
8770:         	Here:												; +0 	Here 
8770: 9487    			dw 		FreeMemory
8772:         	HerePage: 											; +2	Here.Page
8772: 2000    			db 		FirstCodePage,0
8774:         	NextFreePage: 										; +4 	Next available code page (2 8k pages/page)
8774: 22000000			db 		FirstCodePage+2,0,0,0
8778:         	DisplayInfo: 										; +8 	Display information
8778: 80870000			dw 		DisplayInformation,0		
877C:         	StartAddress: 										; +12 	Start Address
877C: 2980    			dw 		__KernelHalt
877E:         	StartAddressPage: 									; +14 	Start Page
877E: 2000    			db 		FirstCodePage,0
              	
              	; ***************************************************************************************
              	;
              	;							 Display system information
              	;
              	; ***************************************************************************************
              	
8780:         	DisplayInformation:
              	
8780:         	SIScreenWidth: 										; +0 	screen width
8780: 00000000			db 		0,0,0,0
8784:         	SIScreenHeight:										; +4 	screen height
8784: 00000000			db 		0,0,0,0
8788:         	SIScreenSize:										; +8 	screen size
8788: 00000000			db 		0,0,0,0
878C:         	SIFontBase:											; +12 	font in use
878C: 2B800000			dw 		AlternateFont,0
8790:         	SIScreenDriver:										; +16 	currently selected screen driver
8790: 00000000			dw 		0,0
              	
8794:         	FreeMemory:		


; +++ segments +++

#CODE          = $8000 = 32768,  size = $0794 =  1940

; +++ global symbols +++

AlternateFont       = $802B = 32811          kernel.asm:40
Boot                = $800A = 32778          kernel.asm:22
DIVDivideMod16      = $835D = 33629          __source.asm:50
DisplayInfo         = $8778 = 34680          data.asm:26 (unused)
DisplayInformation  = $8780 = 34688          data.asm:39
Div16_Loop1         = $8367 = 33639          __source.asm:59
Div16_Loop2         = $8378 = 33656          __source.asm:73
Div16_NoAdd1        = $836F = 33647          __source.asm:65
Div16_NoAdd2        = $8380 = 33664          __source.asm:79
FirstCodePage       = $0020 =    32          kernel.asm:12
FreeMemory          = $8794 = 34708          data.asm:52
GFXInitialise48k    = $83EB = 33771          __source.asm:202
GFXInitialiseLayer2 = $852D = 34093          __source.asm:475
GFXInitialiseLowRes = $85E4 = 34276          __source.asm:636
GFXMode             = $84B7 = 33975          __source.asm:352
GFXPrintCharacter48k = $8417 = 33815          __source.asm:236
GFXPrintCharacterLayer2 = $855D = 34141          __source.asm:511
GFXPrintCharacterLowRes = $860E = 34318          __source.asm:668
GFXWriteCharacter   = $84E8 = 34024          __source.asm:396
GFXWriteHexWord     = $84FB = 34043          __source.asm:419
GFXWriteHexWordA    = $84FD = 34045          __source.asm:421 (unused)
Here                = $8770 = 34672          data.asm:20 (unused)
HerePage            = $8772 = 34674          data.asm:22 (unused)
IOScanKeyboard      = $86A1 = 34465          __source.asm:795
L2PClear            = $8536 = 34102          __source.asm:482
L2PClearBank        = $8545 = 34117          __source.asm:490
LowClearScreen      = $85F7 = 34295          __source.asm:648
MULTMultiply16      = $839F = 33695          __source.asm:118
NextFreePage        = $8774 = 34676          data.asm:24 (unused)
SIFontBase          = $878C = 34700          data.asm:47
SIScreenDriver      = $8790 = 34704          data.asm:49
SIScreenHeight      = $8784 = 34692          data.asm:43
SIScreenSize        = $8788 = 34696          data.asm:45
SIScreenWidth       = $8780 = 34688          data.asm:41
StackTop            = $5FFE = 24574          kernel.asm:13
StartAddress        = $877C = 34684          data.asm:28
StartAddressPage    = $877E = 34686          data.asm:30
SystemInformation   = $8770 = 34672          data.asm:18
__Core__Mult_Loop   = $83A6 = 33702          __source.asm:124
__Core__Mult_Shift  = $83AB = 33707          __source.asm:128
__GFXConfigure      = $84CD = 33997          __source.asm:371
__GFXLayer2         = $84C5 = 33989          __source.asm:364
__GFXLowRes         = $84CA = 33994          __source.asm:368
__GFXWCExit         = $84F6 = 34038          __source.asm:406
__GFXWHByte         = $850F = 34063          __source.asm:437
__GFXWHDigit        = $8525 = 34085          __source.asm:451
__GFXWHNibble       = $851C = 34076          __source.asm:445
__KernelHalt        = $8029 = 32809          kernel.asm:37
__L2Exit            = $85DD = 34269          __source.asm:612
__L2Loop            = $85CE = 34254          __source.asm:599
__L2Not1            = $8579 = 34169          __source.asm:533
__L2Not2            = $857F = 34175          __source.asm:537
__L2Not3            = $8585 = 34181          __source.asm:541
__L2NotCursor       = $8590 = 34192          __source.asm:550
__L2NotSet          = $85D4 = 34260          __source.asm:604
__L2Outer           = $85C5 = 34245          __source.asm:593
__LPExit            = $8682 = 34434          __source.asm:761
__LowLoop           = $866E = 34414          __source.asm:745
__LowNotLower2      = $8663 = 34403          __source.asm:737
__LowNotReverse     = $8630 = 34352          __source.asm:697
__LowNotSet         = $8674 = 34420          __source.asm:750
__LowOuter          = $8665 = 34405          __source.asm:739
__ZXWCCopy          = $8457 = 33879          __source.asm:298
__ZXWCExit          = $845E = 33886          __source.asm:305
___kr4              = $86D2 = 34514          __source.asm:826
__cs1               = $83FB = 33787          __source.asm:212
__cs2               = $8403 = 33795          __source.asm:217
__kr1               = $86B6 = 34486          __source.asm:809
__kr2               = $86C1 = 34497          __source.asm:815
__kr3               = $86C3 = 34499          __source.asm:818
__kr_exit           = $86F2 = 34546          __source.asm:856
__kr_keypressed     = $86EC = 34540          __source.asm:850
__kr_no_shift_table = $86F6 = 34550          __source.asm:871
__kr_shift_table    = $871E = 34590          __source.asm:877
__kr_symbol_shift_table = $871E = 34590          __source.asm:878
_end                = $8794 = 34708          kernel.asm:2 (unused)
_size               = $0794 =  1940          kernel.asm:2 (unused)
link0               = $832B = 33579          __source.asm:15
link1               = $8344 = 33604          __source.asm:31
link10              = $8689 = 34441          __source.asm:780
link11              = $876E = 34670          __source.asm:888
link2               = $8388 = 33672          __source.asm:102
link3               = $83B9 = 33721          __source.asm:151
link4               = $83CA = 33738          __source.asm:162
link5               = $83DB = 33755          __source.asm:173
link6               = $8463 = 33891          __source.asm:322
link7               = $8478 = 33912          __source.asm:327
link8               = $848B = 33931          __source.asm:332
link9               = $84A1 = 33953          __source.asm:337
linkHeader          = $832B = 33579          __source.asm:14


total time: 0.0036 sec.
no errors
